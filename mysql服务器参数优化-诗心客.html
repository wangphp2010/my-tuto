<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0080)http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <meta http-equiv="Content-Language" content="zh-CN"> <title>mysql服务器参数优化-诗心客</title> <meta name="generator" content="Z-BlogPHP 1.4 Deeplue Build 150101"> <link rel="stylesheet" rev="stylesheet" href="./mysql服务器参数优化-诗心客_files/default.css" type="text/css" media="all"> <script src="./mysql服务器参数优化-诗心客_files/common.js.下载" type="text/javascript"></script> <script src="./mysql服务器参数优化-诗心客_files/custom.js.下载" type="text/javascript"></script> <script src="./mysql服务器参数优化-诗心客_files/c_html_js_add.php" type="text/javascript"></script><script src="./mysql服务器参数优化-诗心客_files/shCore.pack.js.下载" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="./mysql服务器参数优化-诗心客_files/shCoreDefault.pack.css">
 <script src="./mysql服务器参数优化-诗心客_files/js.js.下载" type="text/javascript"></script> <link href="./mysql服务器参数优化-诗心客_files/fancybox.css" rel="stylesheet" type="text/css"> <script src="./mysql服务器参数优化-诗心客_files/fancybox.js.下载"></script> <script type="text/javascript">$(document).ready(function() {$(".fancybox").fancybox();});</script> <script type="text/javascript" language="javascript">  
		$(function(){
			<!--侧栏-->	
			var divtags=$("#divTags a");
			function randomcolor(){
				var str=Math.ceil(Math.random()*16777215).toString(16);  
				if(str.length<6){  
					str="0"+str;  
				}  
					return str;
				}
				for(len=divtags.length,i=len;i--;){ 
					divtags[i].style.color="#"+randomcolor();
				} 
				for(len=rantags.length,i=len;i--;){ 
					rantags[i].style.color="#"+randomcolor();
				} 
			})
</script> <link href="./mysql服务器参数优化-诗心客_files/pace-theme-mac-osx.css" rel="stylesheet" type="text/css"> <script src="./mysql服务器参数优化-诗心客_files/pace.js.下载" type="text/javascript"></script> <link href="./mysql服务器参数优化-诗心客_files/top.css" rel="stylesheet" type="text/css"> <link href="./mysql服务器参数优化-诗心客_files/style.css" rel="stylesheet" type="text/css"> <script src="./mysql服务器参数优化-诗心客_files/script.js.下载" type="text/javascript"></script> <script src="./mysql服务器参数优化-诗心客_files/share.js.下载"></script><link rel="stylesheet" href="./mysql服务器参数优化-诗心客_files/share_style0_32.css"><link rel="stylesheet" href="./mysql服务器参数优化-诗心客_files/share_popup.css"><link rel="stylesheet" href="./mysql服务器参数优化-诗心客_files/select_share.css"></head> <body class=" single single-post blog index logged-out  pace-done"><div id="touchvpn_icon_container" class="disconnected" draggable="true" style="right: 0.78125000% !important; bottom: 1.57894737% !important;"><div id="touchvpn_status_icon" class="touchvpn_gb"><div class="touchvpn_icon_sign">Best choice for browsing</div></div><div id="touchvpn_icon_selector"><div class="touchvpn_country touchvpn_ru"><div class="touchvpn_icon_sign">Browse from Russian Federation</div></div><div class="touchvpn_country touchvpn_fr"><div class="touchvpn_icon_sign">Browse from France</div></div><div class="touchvpn_country touchvpn_nl"><div class="touchvpn_icon_sign">Browse from Netherlands</div></div><div class="touchvpn_country touchvpn_sg"><div class="touchvpn_icon_sign">Browse from Singapore</div></div></div></div><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="width: 100%;">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div> <header class="header nav-fixed"> <div class="container"> <div class="logo"> <h1> <a href="http://www.shixinke.com/" title="mysql服务器参数优化"> <img src="./mysql服务器参数优化-诗心客_files/logo.png" data-bd-imgshare-binded="1">mysql服务器参数优化 </a> </h1> <div class="brand"> 专注web开发与诗词创作</div> </div> <div class="header-nav"> <div class="topbar"> <ul class="site-nav topmenu"> <li><a href="http://www.shixinke.com/guestbook.html">留言</a></li> <li><a href="http://weibo.com/yimengshixin" title="诗心客的新浪微博" target="_blank"><img src="./mysql服务器参数优化-诗心客_files/weibo2.png" data-bd-imgshare-binded="1"></a></li> </ul> <a href="javascript:;" class="signin-loader"></a> </div> <i class="fa fa-bars m-icon-nav"></i> <ul class="site-nav site-navbar"> <li id="nvabar-item-index"><a href="http://www.shixinke.com/">首页</a></li><li id="navbar-category-2"><a href="http://www.shixinke.com/category-technology.html">左手代码</a></li><li id="navbar-category-3"><a href="http://www.shixinke.com/category-poem.html">右手诗</a></li><li id="navbar-category-4"><a href="http://www.shixinke.com/category-ec.html">电子商务</a></li><li id="navbar-category-5"><a href="http://www.shixinke.com/category-life.html">生活与工作</a></li><li id="navbar-category-6"><a href="http://www.shixinke.com/category-resource.html">资源</a></li><li id="navbar-item-RegLabel"><a href="http://www.shixinke.com/?Tags">标签云集</a></li><li id="navbar-item-payment"><a href="http://www.shixinke.com/?pay">打赏我</a></li> <li class="navto-search"><a href="javascript:;" class="search-show active" id="search-link"><i class="iconfont icon-sousuo"></i></a></li> </ul> </div> </div> </header> <div class="clear-bar"></div> <div class="site-search" id="search-bar"> <div class="container"> <form method="post" class="site-search-form" action="http://www.shixinke.com/zb_system/cmd.php?act=search"><input class="search-input" name="q" type="text" placeholder="输入关键字"> <button class="search-btn" type="submit"><i class="iconfont icon-sousuo"></i></button> </form> </div> </div> <meta name="keywords" content="mysql"> <meta name="description" content="一、调整MySQL配置参数的说明调整MySQL服务器参数，性能并不能得到数量级的提升要慎重调整MySQL服务器参数，在有经验的DBA的指导下调整，否则，不合理的调整，可能会造成MySQL的安全性问题，..."> <section id="cneet" class="container"> <div id="left" class="content-wrap"> <div class="content"> <header class="article-header"> <h1 class="article-title"><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization">mysql服务器参数优化</a></h1> <div class="article-meta"> <span class="item"></span> <span class="item">分类：<a href="http://www.shixinke.com/category-mysql.html" rel="category tag">MySQL数据库</a></span> <span class="item post-views">阅读(361)</span> <span class="item">评论(<span id="duoshuo_comment200" duoshuo_id="200"></span>)</span> </div> </header> <article class="article-content"> <p>一、调整MySQL配置参数的说明<br></p><ul class=" list-paddingleft-2" style="list-style-type: circle;"><li><p>调整MySQL服务器参数，性能并不能得到数量级的提升</p></li><li><p>要慎重调整MySQL服务器参数，在有经验的DBA的指导下调整，否则，不合理的调整，可能会造成MySQL的安全性问题，甚至造成MySQL服务的异常</p></li><li><p>有些参数，需要重启MySQL才能起作用，因此要慎重对待。另外要确定MySQL配置文件的正确位置</p></li><li><p>对调整后的参数要进行观察和监控，分析其是否真正起到了优化的作用</p></li></ul><p>二、配置文件及配置项说明<br></p><p>1、确定配置文件位置</p><div><div id="highlighter_579700" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2" style="height: 14px;">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2" style="height: 14px;"><code class="bash plain">/usr/local/mysql/bin/mysqld</code>&nbsp;<code class="bash plain">--verbose&nbsp;--help&nbsp;|&nbsp;</code><code class="bash functions">grep</code>&nbsp;<code class="bash plain">-A&nbsp;1&nbsp;</code><code class="bash string">'Default&nbsp;options'</code></div></div></td></tr></tbody></table></div></div><p>结果如下：</p><p><a href="./mysql服务器参数优化-诗心客_files/201611071478496101344867.png" title="201611071478496101344867.png" alt="conf.png" rel="box" class="fancybox"><img src="./mysql服务器参数优化-诗心客_files/201611071478496101344867.png" title="201611071478496101344867.png" alt="conf.png" data-bd-imgshare-binded="1"></a></p><p>这是查找配置文件的优先级说明</p><p>2、配置项说明</p><p>对于MySQL配置项，有的配置项是对于一个线程而言的(即为每个线程分配的资源,包括<span style="color: rgb(255, 0, 0);"><strong>sort_buffer_size,join_buffer_size,read_buffer_size,read_rnd_buffer_size</strong></span>是为每个连接线程分配的内存大小)，因此要充分估计MySQL的负载。</p><p>三、MySQL配置参数调优</p><p>1、内存配置相关参数<br></p><p>内存配置调优的原则：</p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p>确定MySQL能使用的内存的绝对上限(比如是物理内存的多少)</p></li><li><p>确定MySQL会为每个连接使用多少内存，比如排序缓冲区和临时表(要充分估计最大连接数，如sort_buffer_size,join_buffer_size,read_buffer_size,read_rnd_buffer_size)</p></li><li><p>确定操作系统需要多少内存来很好的运行自身，包括机器上其他程序</p></li><li><p>假设以上工作都完成，就可以把剩下的内存分配给MySQL的缓存，如InnoDB的缓存池</p></li></ul><p>(1)缓存池配置</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">innodb_buffer_pool_size</span></strong>：InnoDB单个缓存池大小<br></p></li></ul><p>&nbsp; &nbsp;作用：用于缓存索引和数据，所以设置过大或过小都不好，设置过大，不仅造成资源的浪费，还会导致system的swap空间被占用，导致操作系统变慢，从而减低sql查询的效率，设置过小，会影响MySQL的性能。最大最好不要超过MySQL数据量和索引量的总的大小(要考虑后续数据的增长)。</p><p>&nbsp; &nbsp;推荐值：MySQL官方推荐其值为MySQL所在服务器物理内存的50%-80%，但我们应该根据具体情况来设定</p><p>&nbsp; &nbsp;计算公式：innodb缓存池总大小 &lt;=&nbsp;物理内存 - 连接数 * 每个连接分配的内存 - 系统程序内存</p><ul class="custom_dash list-paddingleft-1"><li class="list-dash list-dash-paddingleft"><p>- 物理内存即服务器的总内存大小</p></li><li class="list-dash list-dash-paddingleft"><p>- 系统程序内存，包括运行操作系统正常运行的内存，以及系统上其他程序正常运行需要的内存</p></li><li class="list-dash list-dash-paddingleft"><p>- 每个连接分配的内存，如排序缓存池sort_buffer_size、连接缓存池join_buffer_size,读入缓存池read_buffer_size,随机读入缓存池read_rnd_buffer_size</p></li></ul><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">innodb_buffer_pool_instances</span></strong>:InnoDB缓存池的数量</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">key_buffer_size</span></strong>:MyISAM存储引擎索引缓存池大小</p></li></ul><p>&nbsp; &nbsp;作用：用于缓存MyISAM索引，数据是根据操作系统来决定是否存储(根据索引量来决定，通过计算索引的大小来决定其大小)</p><p>&nbsp; &nbsp;推荐值：和MyISAM的索引量大小匹配即可</p><p>&nbsp; &nbsp;获取方式：查看MyISAM表的所有索引的数量</p><div><div id="highlighter_841973" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2" style="height: 14px;">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2" style="height: 14px;"><code class="bash functions">select</code>&nbsp;<code class="bash functions">sum</code><code class="bash plain">(index_length)&nbsp;from&nbsp;information_schema.tables&nbsp;where&nbsp;engine=</code><code class="bash string">"myisam"</code><code class="bash plain">;</code></div></div></td></tr></tbody></table></div></div><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">sort_buffer_size</span></strong>：排序缓存池大小</p><p><strong>作用</strong>：是MySql执行排序使用的缓冲大小</p><p>推荐值：根据服务器的最大连接数(非专业DBA请采用默认值)、以及排序的场景和服务器配置来决定<strong>(针对单个连接)</strong><br></p></li><li><p><strong><span style="color: rgb(255, 0, 0);">join_buffer_size</span></strong>：表连接缓存池大小</p><p>作用：当我们的join是ALL,index,rang或者Index_merge的时候使用的缓冲区<strong>(针对单个连接)</strong></p></li><li><p><strong><span style="color: rgb(255, 0, 0);">read_buffer_size</span></strong>：读入缓存池大小</p><p>作用：是MySql读入缓冲区大小。对表进行顺序扫描的请求将分配一个读入缓冲区，MySql会为它分配一段内存缓冲区</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>read_rnd_buffer_size</strong></span>：随机读入缓存池大小</p><p>作用：是MySql的随机读缓冲区大小。当按任意顺序读取行时(例如，按照排序顺序)，将分配一个随机读缓存区。</p></li></ul><p>(2)线程缓存</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><span style="color: rgb(255, 0, 0);"><strong>thread_cache_size</strong></span>:缓存的线程数量</p><p>作用：保存与当前线程无关的线程，以供新连接使用</p><p>推荐值：观察threads_created这个变量，如果其值小于10，则不用改变当前的配置；然后再观察threads_connected这个变量，如果其值在100-200之间，可以将缓存的线程数量设置为100，如果它在500-700之间，设置为200即可</p></li></ul><p></p><p>(3)表缓存</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><span style="color: rgb(255, 0, 0);"><strong>table_open_cache</strong></span>:打开表的缓存数</p></li></ul><p>作用：为打开的表设置缓存，如果之后打开同名的表，可以从缓存中直接取出，不用直接再打开</p><p>推荐值：不断观察open_tables这个状态值来决定其大小。</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">table_definition_cache</span></strong>：表定义缓存数<br></p></li></ul><p>作用：为表的结构定义建立缓存,存放的表的结构定义信息</p><p>推荐值：根据表的数据来决定(最大为表的数量，当然最好是常用的表)</p><p>2、IO配置相关参数</p><p>MySQL为了较高的性能，并不是每次操作都写入磁盘，也是写入事务日志，再根据相关的配置项，定时从事务日志中获取内容再写入到磁盘。</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">innodb_log_file_size</span></strong>:单个事务日志的大小</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>innodb_flush_log_at_trx_commit</strong></span>:从事务日志中把数据刷新到磁盘的规则</p></li></ul><p>&nbsp; &nbsp; 选项值：</p><ul class="custom_dash list-paddingleft-1"><li class="list-dash list-dash-paddingleft"><p>0表示每秒进行一次log写入cache,并flush log到磁盘</p></li><li class="list-dash list-dash-paddingleft"><p>1表示每次事务提交执行log写入到cache,并flush log到磁盘</p></li><li class="list-dash list-dash-paddingleft"><p>2每秒事务提交，执行log数据写入到cache,每秒执行一次flush log到磁盘</p></li></ul><p>&nbsp; &nbsp; 推荐值：2</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><span style="color: rgb(255, 0, 0);"><strong>innodb_flush_method</strong></span><strong>:</strong>设置InnoDB同步IO的方式</p><p></p><p>推荐值：O_DIRECT</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>innodb_file_per_table</strong></span>:将每个数据库的表的数据存储为一个单独的文件</p><p>推荐值：1</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">innodb_doublewrite</span></strong>&nbsp;：是否启用双写缓存</p><p>推荐值：1</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>open_files_limit</strong></span>：最大打开文件数</p><p>推荐值：观察open_files来决定其值是否修改</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>innodb_read_io_threads</strong></span><strong>:</strong>读IO线程数</p><p>推荐值：可以与服务器CPU核数匹配</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>innodb_write_io_threads</strong></span>:写IO线程数</p><p>推荐值：可以与服务器CPU核数匹配</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">sync_binlog</span></strong>:是否同步二进制日志(在启用主从复制的服务器上)</p><p>推荐值：在主从复制的服务器的主服务器建议开启</p></li><li><p><span style="color: rgb(255, 0, 0);"><strong>tmp_table_size</strong></span>:内部临时表的大小(为每个线程分配的大小)</p><p>作用：在查询时使用到内存临时表时，受该参数影响</p><p>推荐值：根据观察created_tmp_tables和created_tmp_disk_tables的大小来决定，如果created_tmp_disk_tables/created_tmp_tables的比例小于0.25时，则已经很好了，不需要修改，如果超过这个比例，则可以修改。这个最大值不能超过max_heap_table_size</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">max_heap_table_size</span></strong>：内存表大小(为每个线程分配的大小)<br></p></li></ul><p>3、安全配置相关参数</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">expire_logs_day</span></strong>:二进制日志保存的天数</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">read_only</span></strong>:是否只读</p><p>推荐值：在从服务器上建议开启该选项</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">sql_mode</span></strong>:SQL模式</p><p>作用：限制SQL的执行模式</p><p>推荐值：生产环境建议为严格模式(STRICT_TRANS_TABLES)</p></li></ul><p>4、其他参数</p><ul class=" list-paddingleft-2" style="list-style-type: square;"><li><p><strong><span style="color: rgb(255, 0, 0);">max-allowed-packet</span></strong>:设置网络传输中一次消息传输量的最大值，取值范围为1MB~1GB,必须设置为1024的倍数</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">max-connect-errors</span></strong>:每个主机在连接请求异常中断的最大次数，当超过该次数，则禁止host的连接请求，直到服务器重启或flush hosts命令清空该host的相关信息</p></li><li><p><strong><span style="color: rgb(255, 0, 0);">skip-name-resolve</span></strong>:启动mysql禁用DNS主机名查找</p></li></ul><p>四、修改MySQL配置参数的方法：</p><p>1、在命令行下使用set global 参数名 = 参数值，这种在mysql重启后失效。</p><p>如：</p><div><div id="highlighter_768883" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2" style="height: 14px;">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2" style="height: 14px;"><code class="bash functions">set</code>&nbsp;<code class="bash plain">global&nbsp;innodb_buffer_pool_size&nbsp;=&nbsp;10240000</code></div></div></td></tr></tbody></table></div></div><p>2、修改mysql配置文件my.cnf，然后重启MySQL服务</p><p>将配置项写入到配置文件中。(注意配置文件的正确位置)</p><p>五、第三方Mysql配置工具</p><p>地址：<a href="https://tools.percona.com/" _src="https://tools.percona.com/">https://tools.percona.com</a></p><p>根据提示生成适合自己的一份配置，如：根据本人自身需要生成的配置：</p><div><div id="highlighter_367271" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2" style="height: 14px;">1</div><div class="line number2 index1 alt1" style="height: 14px;">2</div><div class="line number3 index2 alt2" style="height: 14px;">3</div><div class="line number4 index3 alt1" style="height: 14px;">4</div><div class="line number5 index4 alt2" style="height: 14px;">5</div><div class="line number6 index5 alt1" style="height: 14px;">6</div><div class="line number7 index6 alt2" style="height: 14px;">7</div><div class="line number8 index7 alt1" style="height: 14px;">8</div><div class="line number9 index8 alt2" style="height: 14px;">9</div><div class="line number10 index9 alt1" style="height: 14px;">10</div><div class="line number11 index10 alt2" style="height: 14px;">11</div><div class="line number12 index11 alt1" style="height: 14px;">12</div><div class="line number13 index12 alt2" style="height: 14px;">13</div><div class="line number14 index13 alt1" style="height: 14px;">14</div><div class="line number15 index14 alt2" style="height: 14px;">15</div><div class="line number16 index15 alt1" style="height: 14px;">16</div><div class="line number17 index16 alt2" style="height: 14px;">17</div><div class="line number18 index17 alt1" style="height: 14px;">18</div><div class="line number19 index18 alt2" style="height: 14px;">19</div><div class="line number20 index19 alt1" style="height: 14px;">20</div><div class="line number21 index20 alt2" style="height: 14px;">21</div><div class="line number22 index21 alt1" style="height: 14px;">22</div><div class="line number23 index22 alt2" style="height: 14px;">23</div><div class="line number24 index23 alt1" style="height: 14px;">24</div><div class="line number25 index24 alt2" style="height: 14px;">25</div><div class="line number26 index25 alt1" style="height: 14px;">26</div><div class="line number27 index26 alt2" style="height: 14px;">27</div><div class="line number28 index27 alt1" style="height: 14px;">28</div><div class="line number29 index28 alt2" style="height: 14px;">29</div><div class="line number30 index29 alt1" style="height: 14px;">30</div><div class="line number31 index30 alt2" style="height: 14px;">31</div><div class="line number32 index31 alt1" style="height: 14px;">32</div><div class="line number33 index32 alt2" style="height: 14px;">33</div><div class="line number34 index33 alt1" style="height: 14px;">34</div><div class="line number35 index34 alt2" style="height: 28px;">35</div><div class="line number36 index35 alt1" style="height: 14px;">36</div><div class="line number37 index36 alt2" style="height: 14px;">37</div><div class="line number38 index37 alt1" style="height: 14px;">38</div><div class="line number39 index38 alt2" style="height: 14px;">39</div><div class="line number40 index39 alt1" style="height: 28px;">40</div><div class="line number41 index40 alt2" style="height: 14px;">41</div><div class="line number42 index41 alt1" style="height: 14px;">42</div><div class="line number43 index42 alt2" style="height: 14px;">43</div><div class="line number44 index43 alt1" style="height: 14px;">44</div><div class="line number45 index44 alt2" style="height: 14px;">45</div><div class="line number46 index45 alt1" style="height: 14px;">46</div><div class="line number47 index46 alt2" style="height: 14px;">47</div><div class="line number48 index47 alt1" style="height: 14px;">48</div><div class="line number49 index48 alt2" style="height: 14px;">49</div><div class="line number50 index49 alt1" style="height: 14px;">50</div><div class="line number51 index50 alt2" style="height: 14px;">51</div><div class="line number52 index51 alt1" style="height: 14px;">52</div><div class="line number53 index52 alt2" style="height: 14px;">53</div><div class="line number54 index53 alt1" style="height: 14px;">54</div><div class="line number55 index54 alt2" style="height: 14px;">55</div><div class="line number56 index55 alt1" style="height: 14px;">56</div><div class="line number57 index56 alt2" style="height: 14px;">57</div><div class="line number58 index57 alt1" style="height: 14px;">58</div><div class="line number59 index58 alt2" style="height: 14px;">59</div><div class="line number60 index59 alt1" style="height: 14px;">60</div><div class="line number61 index60 alt2" style="height: 14px;">61</div><div class="line number62 index61 alt1" style="height: 14px;">62</div><div class="line number63 index62 alt2" style="height: 14px;">63</div><div class="line number64 index63 alt1" style="height: 14px;">64</div><div class="line number65 index64 alt2" style="height: 14px;">65</div><div class="line number66 index65 alt1" style="height: 14px;">66</div><div class="line number67 index66 alt2" style="height: 14px;">67</div><div class="line number68 index67 alt1" style="height: 14px;">68</div><div class="line number69 index68 alt2" style="height: 14px;">69</div><div class="line number70 index69 alt1" style="height: 14px;">70</div><div class="line number71 index70 alt2" style="height: 14px;">71</div><div class="line number72 index71 alt1" style="height: 14px;">72</div><div class="line number73 index72 alt2" style="height: 14px;">73</div><div class="line number74 index73 alt1" style="height: 14px;">74</div><div class="line number75 index74 alt2" style="height: 14px;">75</div><div class="line number76 index75 alt1" style="height: 14px;">76</div><div class="line number77 index76 alt2" style="height: 14px;">77</div><div class="line number78 index77 alt1" style="height: 14px;">78</div><div class="line number79 index78 alt2" style="height: 14px;">79</div><div class="line number80 index79 alt1" style="height: 14px;">80</div><div class="line number81 index80 alt2" style="height: 14px;">81</div><div class="line number82 index81 alt1" style="height: 14px;">82</div><div class="line number83 index82 alt2" style="height: 14px;">83</div><div class="line number84 index83 alt1" style="height: 14px;">84</div><div class="line number85 index84 alt2" style="height: 14px;">85</div><div class="line number86 index85 alt1" style="height: 14px;">86</div><div class="line number87 index86 alt2" style="height: 14px;">87</div><div class="line number88 index87 alt1" style="height: 14px;">88</div><div class="line number89 index88 alt2" style="height: 14px;">89</div><div class="line number90 index89 alt1" style="height: 14px;">90</div><div class="line number91 index90 alt2" style="height: 14px;">91</div><div class="line number92 index91 alt1" style="height: 14px;">92</div><div class="line number93 index92 alt2" style="height: 14px;">93</div><div class="line number94 index93 alt1" style="height: 14px;">94</div><div class="line number95 index94 alt2" style="height: 14px;">95</div><div class="line number96 index95 alt1" style="height: 14px;">96</div><div class="line number97 index96 alt2" style="height: 14px;">97</div><div class="line number98 index97 alt1" style="height: 14px;">98</div><div class="line number99 index98 alt2" style="height: 14px;">99</div><div class="line number100 index99 alt1" style="height: 14px;">100</div><div class="line number101 index100 alt2" style="height: 14px;">101</div><div class="line number102 index101 alt1" style="height: 14px;">102</div><div class="line number103 index102 alt2" style="height: 14px;">103</div><div class="line number104 index103 alt1" style="height: 14px;">104</div><div class="line number105 index104 alt2" style="height: 14px;">105</div><div class="line number106 index105 alt1" style="height: 14px;">106</div><div class="line number107 index106 alt2" style="height: 14px;">107</div><div class="line number108 index107 alt1" style="height: 14px;">108</div><div class="line number109 index108 alt2" style="height: 14px;">109</div><div class="line number110 index109 alt1" style="height: 14px;">110</div><div class="line number111 index110 alt2" style="height: 14px;">111</div><div class="line number112 index111 alt1" style="height: 14px;">112</div><div class="line number113 index112 alt2" style="height: 14px;">113</div><div class="line number114 index113 alt1" style="height: 14px;">114</div><div class="line number115 index114 alt2" style="height: 28px;">115</div><div class="line number116 index115 alt1" style="height: 14px;">116</div><div class="line number117 index116 alt2" style="height: 14px;">117</div><div class="line number118 index117 alt1" style="height: 14px;">118</div><div class="line number119 index118 alt2" style="height: 14px;">119</div><div class="line number120 index119 alt1" style="height: 14px;">120</div><div class="line number121 index120 alt2" style="height: 14px;">121</div><div class="line number122 index121 alt1" style="height: 14px;">122</div><div class="line number123 index122 alt2" style="height: 14px;">123</div><div class="line number124 index123 alt1" style="height: 14px;">124</div><div class="line number125 index124 alt2" style="height: 14px;">125</div><div class="line number126 index125 alt1" style="height: 14px;">126</div><div class="line number127 index126 alt2" style="height: 14px;">127</div><div class="line number128 index127 alt1" style="height: 14px;">128</div><div class="line number129 index128 alt2" style="height: 14px;">129</div><div class="line number130 index129 alt1" style="height: 14px;">130</div><div class="line number131 index130 alt2" style="height: 14px;">131</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2" style="height: 14px;"><code class="bash plain">[mysql]</code></div><div class="line number2 index1 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;CLIENT&nbsp;#</code></div><div class="line number3 index2 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;mysql服务器端口号</code></div><div class="line number4 index3 alt1" style="height: 14px;"><code class="bash plain">port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3306</code></div><div class="line number5 index4 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;mysql&nbsp;socket连接文件(根据自己的需要设置，且/data/mysql要有可写权限)</code></div><div class="line number6 index5 alt1" style="height: 14px;"><code class="bash plain">socket&nbsp;=&nbsp;</code><code class="bash plain">/data/mysql/mysql</code><code class="bash plain">.sock</code></div><div class="line number7 index6 alt2" style="height: 14px;">&nbsp;</div><div class="line number8 index7 alt1" style="height: 14px;"><code class="bash plain">[mysqld]</code></div><div class="line number9 index8 alt2" style="height: 14px;">&nbsp;</div><div class="line number10 index9 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;GENERAL&nbsp;#</code></div><div class="line number11 index10 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;服务器标识id(用于主从复制)</code></div><div class="line number12 index11 alt1" style="height: 14px;"><code class="bash plain">server-</code><code class="bash functions">id</code>&nbsp;&nbsp;<code class="bash plain">=&nbsp;1</code></div><div class="line number13 index12 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;操作mysql的系统用户名</code></div><div class="line number14 index13 alt1" style="height: 14px;"><code class="bash plain">user&nbsp;&nbsp;&nbsp;=&nbsp;mysql</code></div><div class="line number15 index14 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;默认存储引擎</code></div><div class="line number16 index15 alt1" style="height: 14px;"><code class="bash plain">default-storage-engine&nbsp;=&nbsp;InnoDB</code></div><div class="line number17 index16 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;mysql&nbsp;socket连接文件</code></div><div class="line number18 index17 alt1" style="height: 14px;"><code class="bash plain">socket&nbsp;=&nbsp;</code><code class="bash plain">/data/mysql/mysql</code><code class="bash plain">.sock</code></div><div class="line number19 index18 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;记录mysql进程的文件</code></div><div class="line number20 index19 alt1" style="height: 14px;"><code class="bash plain">pid-</code><code class="bash functions">file</code>&nbsp;&nbsp;&nbsp;<code class="bash plain">=&nbsp;</code><code class="bash plain">/data/mysql/mysql</code><code class="bash plain">.pid</code></div><div class="line number21 index20 alt2" style="height: 14px;">&nbsp;</div><div class="line number22 index21 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;MyISAM&nbsp;#</code></div><div class="line number23 index22 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;索引缓冲区大小</code></div><div class="line number24 index23 alt1" style="height: 14px;"><code class="bash plain">key-buffer-size=&nbsp;32M</code></div><div class="line number25 index24 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;自动检查和修复没有适当关闭的MyISAM表</code></div><div class="line number26 index25 alt1" style="height: 14px;"><code class="bash plain">myisam-recover&nbsp;=&nbsp;FORCE,BACKUP</code></div><div class="line number27 index26 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;MyISAM表发生变化时重新排序所需要的缓冲区大小</code></div><div class="line number28 index27 alt1" style="height: 14px;"><code class="bash plain">myisam-</code><code class="bash functions">sort</code><code class="bash plain">-buffer-size=&nbsp;&nbsp;128M</code></div><div class="line number29 index28 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;重建索引时所允许的最大临时文件大小&nbsp;</code></div><div class="line number30 index29 alt1" style="height: 14px;"><code class="bash plain">myisam-max-</code><code class="bash functions">sort</code><code class="bash plain">-</code><code class="bash functions">file</code><code class="bash plain">-size&nbsp;&nbsp;=&nbsp;&nbsp;10G</code></div><div class="line number31 index30 alt2" style="height: 14px;">&nbsp;</div><div class="line number32 index31 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;SAFETY&nbsp;#</code></div><div class="line number33 index32 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;设置网络传输中一次消息传输量的最大值，取值范围为1MB~1GB,必须设置为1024的倍数</code></div><div class="line number34 index33 alt1" style="height: 14px;"><code class="bash plain">max-allowed-packet&nbsp;=&nbsp;32M</code></div><div class="line number35 index34 alt2" style="height: 28px;"><code class="bash comments">#&nbsp;每个主机在连接请求异常中断的最大次数，当超过该次数，则禁止host的连接请求，直到服务器重启或flush&nbsp;hosts命令清空该host的相关信息</code></div><div class="line number36 index35 alt1" style="height: 14px;"><code class="bash plain">max-connect-errors&nbsp;=&nbsp;6000</code></div><div class="line number37 index36 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;启动mysql禁用DNS主机名查找</code></div><div class="line number38 index37 alt1" style="height: 14px;"><code class="bash plain">skip-name-resolve</code></div><div class="line number39 index38 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;SQL模式(在生产环境要设置为严格模式，可以防止非法数据的插入)</code></div><div class="line number40 index39 alt1" style="height: 28px;"><code class="bash plain">sql-mode&nbsp;&nbsp;&nbsp;=&nbsp;STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_AUTO_VALUE_ON_ZERO,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ONLY_FULL_GROUP_BY</code></div><div class="line number41 index40 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;系统时间和当前时间一致</code></div><div class="line number42 index41 alt1" style="height: 14px;"><code class="bash plain">sysdate-is-now&nbsp;=&nbsp;1</code></div><div class="line number43 index42 alt2" style="height: 14px;">&nbsp;</div><div class="line number44 index43 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;DATA&nbsp;STORAGE&nbsp;#</code></div><div class="line number45 index44 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;数据文件位置</code></div><div class="line number46 index45 alt1" style="height: 14px;"><code class="bash plain">datadir=&nbsp;</code><code class="bash plain">/data/mysql/</code></div><div class="line number47 index46 alt2" style="height: 14px;">&nbsp;</div><div class="line number48 index47 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;BINARY&nbsp;LOGGING&nbsp;#</code></div><div class="line number49 index48 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;二进制操作日志文件</code></div><div class="line number50 index49 alt1" style="height: 14px;"><code class="bash plain">log-bin=&nbsp;</code><code class="bash plain">/data/mysql/mysql-bin</code></div><div class="line number51 index50 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;日志有效时间</code></div><div class="line number52 index51 alt1" style="height: 14px;"><code class="bash plain">expire-logs-days&nbsp;&nbsp;&nbsp;=&nbsp;14</code></div><div class="line number53 index52 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;二进制日志是否同步写入磁盘(1表示每次每写入，是最安全的，但也是最慢的)</code></div><div class="line number54 index53 alt1" style="height: 14px;"><code class="bash functions">sync</code><code class="bash plain">-binlog=&nbsp;1</code></div><div class="line number55 index54 alt2" style="height: 14px;">&nbsp;</div><div class="line number56 index55 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;CACHES&nbsp;AND&nbsp;LIMITS&nbsp;#</code></div><div class="line number57 index56 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;内存临时表大小(超过其大小会写入磁盘)</code></div><div class="line number58 index57 alt1" style="height: 14px;"><code class="bash plain">tmp-table-size&nbsp;=&nbsp;32M</code></div><div class="line number59 index58 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;可创建的内存表大小</code></div><div class="line number60 index59 alt1" style="height: 14px;"><code class="bash plain">max-heap-table-size=&nbsp;32M</code></div><div class="line number61 index60 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;是否将查询结果放到查询缓存中</code></div><div class="line number62 index61 alt1" style="height: 14px;"><code class="bash plain">query-cache-</code><code class="bash functions">type</code>&nbsp;&nbsp;&nbsp;<code class="bash plain">=&nbsp;0</code></div><div class="line number63 index62 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;查询缓存大小(在写入量大的系统，建议关闭)</code></div><div class="line number64 index63 alt1" style="height: 14px;"><code class="bash plain">query-cache-size&nbsp;&nbsp;&nbsp;=&nbsp;0</code></div><div class="line number65 index64 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;单个查询能够使用的缓冲区大小</code></div><div class="line number66 index65 alt1" style="height: 14px;"><code class="bash plain">query-cache-limit&nbsp;&nbsp;=&nbsp;4M</code></div><div class="line number67 index66 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;mysql最大进程连接数</code></div><div class="line number68 index67 alt1" style="height: 14px;"><code class="bash plain">max-connections=&nbsp;500</code></div><div class="line number69 index68 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;服务器线程缓存大小，类似于缓存池，1G内存建议为8，2G内存建议为16，4G以上可以配置更大</code></div><div class="line number70 index69 alt1" style="height: 14px;"><code class="bash plain">thread-cache-size&nbsp;&nbsp;=&nbsp;300</code></div><div class="line number71 index70 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;线程并发数，一般设置为核数的2倍，如8核的CPU可以设置为16</code></div><div class="line number72 index71 alt1" style="height: 14px;"><code class="bash plain">thread-concurrency&nbsp;=&nbsp;16</code></div><div class="line number73 index72 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;打开文件描述符的限制(至少在大于&nbsp;table-open-cache*2+InnoDB表的数量)</code></div><div class="line number74 index73 alt1" style="height: 14px;"><code class="bash functions">open</code><code class="bash plain">-files-limit&nbsp;&nbsp;&nbsp;=&nbsp;65535</code></div><div class="line number75 index74 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;表缓存区大小，应该与max_connections设置相关</code></div><div class="line number76 index75 alt1" style="height: 14px;"><code class="bash plain">table-cache=&nbsp;614</code></div><div class="line number77 index76 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;表定义信息缓存(从.frm文件中获取的)</code></div><div class="line number78 index77 alt1" style="height: 14px;"><code class="bash plain">table-definition-cache&nbsp;=&nbsp;1024</code></div><div class="line number79 index78 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;打开表(文件描述符)的缓存数量</code></div><div class="line number80 index79 alt1" style="height: 14px;"><code class="bash plain">table-</code><code class="bash functions">open</code><code class="bash plain">-cache&nbsp;&nbsp;&nbsp;=&nbsp;1024</code></div><div class="line number81 index80 alt2" style="height: 14px;">&nbsp;</div><div class="line number82 index81 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;读入缓冲区大小</code></div><div class="line number83 index82 alt2" style="height: 14px;"><code class="bash functions">read</code><code class="bash plain">-buffer-size&nbsp;&nbsp;&nbsp;=&nbsp;1M</code></div><div class="line number84 index83 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;随机读缓冲区大小</code></div><div class="line number85 index84 alt2" style="height: 14px;"><code class="bash functions">read</code><code class="bash plain">-rnd-buffer-size&nbsp;&nbsp;&nbsp;=&nbsp;16M</code></div><div class="line number86 index85 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;批量插入缓冲区大小</code></div><div class="line number87 index86 alt2" style="height: 14px;"><code class="bash plain">bulk-insert-buffer-size=&nbsp;64M</code></div><div class="line number88 index87 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;用于排序的缓冲区大小</code></div><div class="line number89 index88 alt2" style="height: 14px;"><code class="bash functions">sort</code><code class="bash plain">-buffer-size&nbsp;&nbsp;&nbsp;=&nbsp;2M</code></div><div class="line number90 index89 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;表间关联的缓冲区大小</code></div><div class="line number91 index90 alt2" style="height: 14px;"><code class="bash functions">join</code><code class="bash plain">-buffer-size&nbsp;&nbsp;&nbsp;=&nbsp;2M</code></div><div class="line number92 index91 alt1" style="height: 14px;">&nbsp;</div><div class="line number93 index92 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;INNODB&nbsp;#</code></div><div class="line number94 index93 alt1" style="height: 14px;"><code class="bash comments">#innodb刷新日志和数据的模式，有</code></div><div class="line number95 index94 alt2" style="height: 14px;"><code class="bash plain">innodb-flush-method=&nbsp;O_DIRECT</code></div><div class="line number96 index95 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;为提高性能，可以以循环方式将日志文件写入到多个文件</code></div><div class="line number97 index96 alt2" style="height: 14px;"><code class="bash plain">innodb-log-files-</code><code class="bash keyword">in</code><code class="bash plain">-group&nbsp;&nbsp;=&nbsp;2</code></div><div class="line number98 index97 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;日志缓存区大小</code></div><div class="line number99 index98 alt2" style="height: 14px;"><code class="bash plain">innodb-log-buffer-size&nbsp;=&nbsp;&nbsp;16M</code></div><div class="line number100 index99 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;innodb日志文件大小</code></div><div class="line number101 index100 alt2" style="height: 14px;"><code class="bash plain">innodb-log-</code><code class="bash functions">file</code><code class="bash plain">-size&nbsp;&nbsp;&nbsp;=&nbsp;256M</code></div><div class="line number102 index101 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;提交事务后将日志写入磁盘的频率</code></div><div class="line number103 index102 alt2" style="height: 14px;"><code class="bash plain">innodb-flush-log-at-trx-commit&nbsp;=&nbsp;1</code></div><div class="line number104 index103 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;每个innodb表使用一个数据文件</code></div><div class="line number105 index104 alt2" style="height: 14px;"><code class="bash plain">innodb-</code><code class="bash functions">file</code><code class="bash plain">-per-table&nbsp;&nbsp;=&nbsp;1</code></div><div class="line number106 index105 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;innodb缓存池大小</code></div><div class="line number107 index106 alt2" style="height: 14px;"><code class="bash plain">innodb-buffer-pool-size=&nbsp;12G</code></div><div class="line number108 index107 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;innodb文件IO线程数</code></div><div class="line number109 index108 alt2" style="height: 14px;"><code class="bash plain">innodb-</code><code class="bash functions">file</code><code class="bash plain">-io-threads&nbsp;=&nbsp;&nbsp;4</code></div><div class="line number110 index109 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;innodb并发线程数(与CPU核数相关)</code></div><div class="line number111 index110 alt2" style="height: 14px;"><code class="bash plain">innodb-thread-concurrency&nbsp;&nbsp;=&nbsp;&nbsp;8</code></div><div class="line number112 index111 alt1" style="height: 14px;"><code class="bash spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number113 index112 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;在MySQL暂时停止响应新请求前，短时间内的多少个请求可以被存在堆栈中</code></div><div class="line number114 index113 alt1" style="height: 14px;"><code class="bash plain">back_log&nbsp;=&nbsp;600</code></div><div class="line number115 index114 alt2" style="height: 28px;"><code class="bash comments">#&nbsp;设置事务的隔离级别，可以使用READ-UNCOMMITED&nbsp;读未提交，READ-COMMITED&nbsp;读已提交；REPEATABLE-READ&nbsp;可重复读；SERIALIZABLE&nbsp;串行</code></div><div class="line number116 index115 alt1" style="height: 14px;"><code class="bash plain">transaction_isolcation&nbsp;=&nbsp;READ-COMMITED</code></div><div class="line number117 index116 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;表名都小写</code></div><div class="line number118 index117 alt1" style="height: 14px;"><code class="bash plain">lower_case_table_names&nbsp;=&nbsp;&nbsp;1</code></div><div class="line number119 index118 alt2" style="height: 14px;">&nbsp;</div><div class="line number120 index119 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;避免MySQL外部锁定</code></div><div class="line number121 index120 alt2" style="height: 14px;"><code class="bash plain">external-locking&nbsp;=&nbsp;FALSE&nbsp;</code></div><div class="line number122 index121 alt1" style="height: 14px;">&nbsp;</div><div class="line number123 index122 alt2" style="height: 14px;"><code class="bash comments">#&nbsp;LOGGING&nbsp;#</code></div><div class="line number124 index123 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;错误日志文件</code></div><div class="line number125 index124 alt2" style="height: 14px;"><code class="bash plain">log-error&nbsp;&nbsp;=&nbsp;</code><code class="bash plain">/data/mysql/mysql-error</code><code class="bash plain">.log</code></div><div class="line number126 index125 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;是否记录未使用索引的查询</code></div><div class="line number127 index126 alt2" style="height: 14px;"><code class="bash plain">log-queries-not-using-indexes&nbsp;&nbsp;=&nbsp;1</code></div><div class="line number128 index127 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;是否开启慢查询日志</code></div><div class="line number129 index128 alt2" style="height: 14px;"><code class="bash plain">slow-query-log&nbsp;=&nbsp;1</code></div><div class="line number130 index129 alt1" style="height: 14px;"><code class="bash comments">#&nbsp;慢查询日志文件位置</code></div><div class="line number131 index130 alt2" style="height: 14px;"><code class="bash plain">slow-query-log-</code><code class="bash functions">file</code><code class="bash plain">=&nbsp;</code><code class="bash plain">/data/mysql/mysql-slow</code><code class="bash plain">.log</code></div></div></td></tr></tbody></table></div></div><p>注：以上配置并不是最优的配置，只是做一个简要的说明，请根据项目需要自行调整</p><p style="display:none;" class="cloudreamHelperLink" codetype="0" entryid="200"></p> </article> <div class="bdsharebuttonbox bdshare-button-style0-32" data-bd-bind="1500807086786"><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_more" data-cmd="more"></a><a title="分享到QQ空间" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_qzone" data-cmd="qzone"></a><a title="分享到新浪微博" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_tsina" data-cmd="tsina"></a><a title="分享到腾讯微博" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_tqq" data-cmd="tqq"></a><a title="分享到人人网" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_renren" data-cmd="renren"></a><a title="分享到网易微博" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_t163" data-cmd="t163"></a><a title="分享到微信" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_weixin" data-cmd="weixin"></a><a title="分享到Facebook" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_fbook" data-cmd="fbook"></a><a title="分享到天涯社区" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_ty" data-cmd="ty"></a><a title="分享到51游戏社区" href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_s51" data-cmd="s51"></a></div> <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"32"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","t163","weixin","fbook","ty","s51"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","t163","weixin","fbook","ty","s51"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=86835285.js?cdnversion='+~(-new Date()/36e5)];</script> <div class="article-tags"> </div> <nav class="article-nav"> <span class="article-nav-prev">上一篇<br><a href="http://www.shixinke.com/mysql/mysql-sql-optimization-with-using-explain-and-show-profile" rel="prev">使用explain和show profile来分析SQL语句实现优化SQL语句</a></span> <span class="article-nav-next">下一篇<br><a href="http://www.shixinke.com/mysql/oneproxy-basic-usage-and-configuration-options" rel="next">mysql代理中间件oneproxy系列之oneproxy基本操作和配置参数说明</a></span> </nav> <div id="comments"> <span class="icon icon_comment" title="comment"></span> <label id="AjaxCommentBegin"></label> <div class="pagebar commentpagebar"> </div> <label id="AjaxCommentEnd"></label> <div class="ds-thread" data-category="10" data-thread-key="200" data-title="mysql服务器参数优化" data-author-key="1" data-url=""></div> </div> </div> <div class="pagination"><div class="page-container"></div></div> </div> <div id="right" class="sidebar"> <dl class="function" id="topic"> <dt class="function_t">专题系列</dt><dd class="function_c"> <ul><li style="line-height:30px;"><a href="http://www.shixinke.com/openresty/openresty-skill-road-map" target="_blank">openresty技能学习路线图</a></li><li style="line-height:30px;"><a href="http://www.shixinke.com/php/yaf-topic-to-practise" target="_blank">YAF框架实战手册</a></li></ul> </dd> </dl><dl class="function" id="divCatalog"> <dt class="function_t">文章分类</dt><dd class="function_c"> <ul><li class="li-cate"><a href="http://www.shixinke.com/category-technology.html">左手代码</a><ul class="ul-subcates"><li class="li-subcate"><a href="http://www.shixinke.com/category-html.html">Xhtml/html5</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-js.html">js/JQuery</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-php.html">PHP</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-mysql.html">MySQL数据库</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-nginx.html">Nginx</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-linux.html">Linux系统</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-load-balancing.html">负载均衡</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-memcached.html">memcached</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-redis.html">redis</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-c.html">c</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-develop-tools.html">开发工具</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-ruby.html">ruby</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-openresty.html">OpenResty</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-mq.html">消息系统</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-nodejs.html">NodeJs</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-go.html">golang</a></li></ul></li><li class="li-cate"><a href="http://www.shixinke.com/category-poem.html">右手诗</a><ul class="ul-subcates"><li class="li-subcate"><a href="http://www.shixinke.com/category-traditional-poem.html">古体诗</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-modern-poem.html">现代诗</a></li></ul></li><li class="li-cate"><a href="http://www.shixinke.com/category-ec.html">电子商务</a><ul class="ul-subcates"><li class="li-subcate"><a href="http://www.shixinke.com/category-seo.html">SEO</a></li></ul></li><li class="li-cate"><a href="http://www.shixinke.com/category-life.html">生活与工作</a></li><li class="li-cate"><a href="http://www.shixinke.com/category-resource.html">资源</a><ul class="ul-subcates"><li class="li-subcate"><a href="http://www.shixinke.com/category-book.html">书籍</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-template.html">模板</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-source-code.html">源码</a></li><li class="li-subcate"><a href="http://www.shixinke.com/category-website.html">网站推荐</a></li></ul></li></ul> </dd> </dl><dl class="function" id="divArchives"> <dt class="function_t">文章归档</dt><dd class="function_c"> <ul><li><a href="http://www.shixinke.com/date-2017-4.html">2017年4月 (11)</a></li><li><a href="http://www.shixinke.com/date-2017-3.html">2017年3月 (4)</a></li><li><a href="http://www.shixinke.com/date-2017-2.html">2017年2月 (3)</a></li><li><a href="http://www.shixinke.com/date-2017-1.html">2017年1月 (2)</a></li><li><a href="http://www.shixinke.com/date-2016-12.html">2016年12月 (2)</a></li><li><a href="http://www.shixinke.com/date-2016-11.html">2016年11月 (8)</a></li><li><a href="http://www.shixinke.com/date-2016-10.html">2016年10月 (6)</a></li><li><a href="http://www.shixinke.com/date-2016-9.html">2016年9月 (3)</a></li><li><a href="http://www.shixinke.com/date-2016-8.html">2016年8月 (6)</a></li><li><a href="http://www.shixinke.com/date-2016-7.html">2016年7月 (15)</a></li><li><a href="http://www.shixinke.com/date-2016-6.html">2016年6月 (14)</a></li><li><a href="http://www.shixinke.com/date-2016-5.html">2016年5月 (15)</a></li><li><a href="http://www.shixinke.com/date-2016-4.html">2016年4月 (1)</a></li><li><a href="http://www.shixinke.com/date-2016-1.html">2016年1月 (4)</a></li><li><a href="http://www.shixinke.com/date-2015-9.html">2015年9月 (1)</a></li><li><a href="http://www.shixinke.com/date-2015-7.html">2015年7月 (2)</a></li><li><a href="http://www.shixinke.com/date-2015-6.html">2015年6月 (3)</a></li><li><a href="http://www.shixinke.com/date-2015-5.html">2015年5月 (6)</a></li><li><a href="http://www.shixinke.com/date-2015-4.html">2015年4月 (7)</a></li><li><a href="http://www.shixinke.com/date-2015-3.html">2015年3月 (3)</a></li><li><a href="http://www.shixinke.com/date-2015-2.html">2015年2月 (13)</a></li><li><a href="http://www.shixinke.com/date-2015-1.html">2015年1月 (20)</a></li><li><a href="http://www.shixinke.com/date-2014-12.html">2014年12月 (2)</a></li><li><a href="http://www.shixinke.com/date-2014-10.html">2014年10月 (1)</a></li><li><a href="http://www.shixinke.com/date-2014-9.html">2014年9月 (1)</a></li><li><a href="http://www.shixinke.com/date-2013-12.html">2013年12月 (1)</a></li><li><a href="http://www.shixinke.com/date-2012-12.html">2012年12月 (3)</a></li><li><a href="http://www.shixinke.com/date-2012-11.html">2012年11月 (16)</a></li><li><a href="http://www.shixinke.com/date-2012-1.html">2012年1月 (6)</a></li><li><a href="http://www.shixinke.com/date-2011-11.html">2011年11月 (1)</a></li><li><a href="http://www.shixinke.com/date-2011-10.html">2011年10月 (1)</a></li><li><a href="http://www.shixinke.com/date-2011-8.html">2011年8月 (1)</a></li><li><a href="http://www.shixinke.com/date-2010-12.html">2010年12月 (1)</a></li><li><a href="http://www.shixinke.com/date-2010-11.html">2010年11月 (1)</a></li><li><a href="http://www.shixinke.com/date-2010-6.html">2010年6月 (1)</a></li><li><a href="http://www.shixinke.com/date-2010-5.html">2010年5月 (1)</a></li><li><a href="http://www.shixinke.com/date-2010-4.html">2010年4月 (1)</a></li><li><a href="http://www.shixinke.com/date-2010-3.html">2010年3月 (4)</a></li><li><a href="http://www.shixinke.com/date-2010-1.html">2010年1月 (1)</a></li><li><a href="http://www.shixinke.com/date-2009-11.html">2009年11月 (1)</a></li><li><a href="http://www.shixinke.com/date-2009-10.html">2009年10月 (2)</a></li></ul> </dd> </dl><dl class="function" id="divTags"> <dt class="function_t">标签列表</dt><dd class="function_c"> <ul><li><a href="http://www.shixinke.com/tags-seo.html" style="color: rgb(45, 3, 196);">seo<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%85%A5%E5%8F%A3.html" style="color: rgb(137, 174, 81);">搜索引擎入口<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-phpmailer.html" style="color: rgb(128, 109, 17);">phpmailer<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-email.html" style="color: rgb(81, 60, 45);">email<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-php.html" style="color: rgb(21, 156, 43);">php<span class="tag-count"> (7)</span></a></li><li><a href="http://www.shixinke.com/tags-%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2.html" style="color: rgb(129, 247, 196);">关于博客<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-%E5%8D%9A%E5%AE%A2%E5%8E%86%E5%8F%B2.html" style="color: rgb(82, 152, 37);">博客历史<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-thinkphp%E4%B8%8A%E4%BC%A0.html" style="color: rgb(187, 0, 214);">thinkphp上传<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-ajaxupload.html" style="color: rgb(153, 61, 101);">ajaxupload<span class="tag-count"> (1)</span></a></li><li><a href="http://www.shixinke.com/tags-jquery%E9%80%89%E6%8B%A9%E5%99%A8.html" style="color: rgb(34, 24, 134);">jquery选择器<span class="tag-count"> (3)</span></a></li><li><a href="http://www.shixinke.com/tags-%E7%88%B1%E6%83%85.html" style="color: rgb(1, 90, 93);">爱情<span class="tag-count"> (3)</span></a></li><li><a href="http://www.shixinke.com/tags-%E6%9C%8B%E5%8F%8B.html" style="color: rgb(21, 213, 148);">朋友<span class="tag-count"> (2)</span></a></li><li><a href="http://www.shixinke.com/tags-linux.html" style="color: rgb(219, 188, 187);">linux<span class="tag-count"> (12)</span></a></li><li><a href="http://www.shixinke.com/tags-nginx.html" style="color: rgb(140, 48, 28);">nginx<span class="tag-count"> (19)</span></a></li><li><a href="http://www.shixinke.com/tags-mysql.html" style="color: rgb(231, 59, 28);">mysql<span class="tag-count"> (8)</span></a></li><li><a href="http://www.shixinke.com/tags-memcached.html" style="color: rgb(188, 242, 157);">memcached<span class="tag-count"> (12)</span></a></li><li><a href="http://www.shixinke.com/tags-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html" style="color: rgb(196, 47, 187);">负载均衡<span class="tag-count"> (2)</span></a></li><li><a href="http://www.shixinke.com/tags-redis.html" style="color: rgb(196, 167, 153);">redis<span class="tag-count"> (15)</span></a></li><li><a href="http://www.shixinke.com/tags-c.html" style="color: rgb(117, 92, 136);">c<span class="tag-count"> (3)</span></a></li><li><a href="http://www.shixinke.com/tags-nodejs.html" style="color: rgb(20, 50, 220);">nodejs<span class="tag-count"> (3)</span></a></li><li><a href="http://www.shixinke.com/tags-openresty.html" style="color: rgb(180, 141, 63);">openresty<span class="tag-count"> (5)</span></a></li><li><a href="http://www.shixinke.com/tags-lua.html" style="color: rgb(120, 94, 32);">lua<span class="tag-count"> (2)</span></a></li><li><a href="http://www.shixinke.com/tags-oneproxy.html" style="color: rgb(204, 59, 162);">oneproxy<span class="tag-count"> (3)</span></a></li><li><a href="http://www.shixinke.com/tags-node.html" style="color: rgb(87, 174, 251);">node<span class="tag-count"> (3)</span></a></li><li><a href="http://www.shixinke.com/tags-golang.html" style="color: rgb(30, 133, 175);">golang<span class="tag-count"> (4)</span></a></li></ul> </dd> </dl> </div> </section> <div class="clear"></div> <footer class="footer"> <div class="container"> <div> <script type="text/javascript">function duoshuo_callback(data){if(data.response){for(var i in data.response){jQuery("[duoshuo_id="+i+"]").html(data.response[i].comments);}}};var duoshuoQuery = {short_name:"shixinke"};</script><script type="text/javascript" src="http://static.duoshuo.com/embed.js"></script><script language="javascript" type="text/javascript" src="./mysql服务器参数优化-诗心客_files/event.php"></script><script type="text/javascript" src="http://api.duoshuo.com/threads/counts.jsonp?short_name=shixinke&amp;threads=200%2C&amp;callback=duoshuo_callback&amp;rnd=1759848034"></script> </div> <p class="copy_right"> </p><div class="bottomnav"> <a href="http://www.shixinke.com/about.html">关于我</a> <a>|</a> <a href="http://www.shixinke.com/guestbook.html">给我留言</a></div><p class="center">Copyright © shixinke All Rights Reserved.</p><script type="text/javascript" src="./mysql服务器参数优化-诗心客_files/stats" charset="UTF-8"></script> <p></p> </div> </footer>   <!--57.18 ms , 9 query , 2628kb memory , 2 error--><iframe frameborder="0" id="bdSharePopup_selectshare1500807086799bg" class="bdselect_share_bg" style="top: 4150px; left: 492px; display: inline; width: 300px; height: 136px;" src="./mysql服务器参数优化-诗心客_files/saved_resource.html"></iframe><div id="bdSharePopup_selectshare1500807086799box" style="top: 4150px; left: 492px; display: block; width: 300px;" share-type="selectshare" class="bdselect_share_box" data-bd-bind="1500807086797"><div class="selectshare-mod-triangle"><div class="triangle-border"></div><div class="triangle-inset"></div></div><div class="bdselect_share_head" style="width: 300px;"><span>分享到</span><a href="http://www.baidu.com/s?wd=percona.com%E6%A0%B9%E6%8D%AE%E6%8F%90%E7%A4%BA%E7%94%9F%E6%88%90%E9%80%82%E5%90%88%E8%87%AA%E5%B7%B1%E7%9A%84%E4%B8%80%E4%BB%BD%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%A6%82%EF%BC%9A%E6%A0%B9%E6%8D%AE%E6%9C%AC%E4%BA%BA%E8%87%AA%E8%BA%AB%E9%9C%80%E8%A6%81%E7%94%9F%E6%88%90%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%9A123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131[mysql]# CLIENT ## mysql服务器端口号port                           = 3306# mysql socket连接文件(根据自己的需要设置，且/data/mysql要有可写权限)socket = /data/mysql/mysql.sock [mysqld] # GENERAL ## 服务器标识id(用于主从复制)server-id  = 1# 操作mysql的系统用户名user   = mysql# 默认存储引擎default-storage-engine = InnoDB# mysql socket连接文件socket = /data/mysql/mysql.sock# 记录mysql进程的文件pid-file   = /data/mysql/mysql.pid # MyISAM ## 索引缓冲区大小key-buffer-size= 32M# 自动检查和修复没有适当关闭的MyISAM表myisam-recover = FORCE,BACKUP# MyISAM表发生变化时重新排序所需要的缓冲区大小myisam-sort-buffer-size=  128M# 重建索引时所允许的最大临时文件大小 myisam-max-sort-file-size  =  10G # SAFETY ## 设置网络传输中一次消息传输量的最大值，取值范围为1MB~1GB,必须设置为1024的倍数max-allowed-packet = 32M# 每个主机在连接请求异常中断的最大次数，当超过该次数，则禁止host的连接请求，直到服务器重启或flush hosts命令清空该host的相关信息max-connect-errors = 6000# 启动mysql禁用DNS主机名查找skip-name-resolve# SQL模式(在生产环境要设置为严格模式，可以防止非法数据的插入)sql-mode   = STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_AUTO_VALUE_ON_ZERO,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ONLY_FULL_GROUP_BY# 系统时间和当前时间一致sysdate-is-now = 1 # DATA STORAGE ## 数据文件位置datadir= /data/mysql/ # BINARY LOGGING ## 二进制操作日志文件log-bin= /data/mysql/mysql-bin# 日志有效时间expire-logs-days   = 14# 二进制日志是否同步写入磁盘(1表示每次每写入，是最安全的，但也是最慢的)sync-binlog= 1 # CACHES AND LIMITS ## 内存临时表大小(超过其大小会写入磁盘)tmp-table-size = 32M# 可创建的内存表大小max-heap-table-size= 32M# 是否将查询结果放到查询缓存中query-cache-type   = 0# 查询缓存大小(在写入量大的系统，建议关闭)query-cache-size   = 0# 单个查询能够使用的缓冲区大小query-cache-limit  = 4M# mysql最大进程连接数max-connections= 500# 服务器线程缓存大小，类似于缓存池，1G内存建议为8，2G内存建议为16，4G以上可以配置更大thread-cache-size  = 300# 线程并发数，一般设置为核数的2倍，如8核的CPU可以设置为16thread-concurrency = 16# 打开文件描述符的限制(至少在大于 table-open-cache*2+InnoDB表的数量)open-files-limit   = 65535# 表缓存区大小，应该与max_connections设置相关table-cache= 614# 表定义信息缓存(从.frm文件中获取的)table-definition-cache = 1024# 打开表(文件描述符)的缓存数量table-open-cache   = 1024 # 读入缓冲区大小read-buffer-size   = 1M# 随机读缓冲区大小read-rnd-buffer-size   = 16M# 批量插入缓冲区大小bulk-insert-buffer-size= 64M# 用于排序的缓冲区大小sort-buffer-size   = 2M# 表间关联的缓冲区大小join-buffer-size   = 2M # INNODB ##innodb刷新日志和数据的模式，有innodb-flush-method= O_DIRECT# 为提高性能，可以以循环方式将日志文件写入到多个文件innodb-log-files-in-group  = 2# 日志缓存区大小innodb-log-buffer-size =  16M# innodb日志文件大小innodb-log-file-size   = 256M# 提交事务后将日志写入磁盘的频率innodb-flush-log-at-trx-commit = 1# 每个innodb表使用一个数据文件innodb-file-per-table  = 1# innodb缓存池大小innodb-buffer-pool-size= 12G# innodb文件IO线程数innodb-file-io-threads =  4# innodb并发线程数(与CPU核数相关)innodb-thread-concurrency  =  8    # 在MySQL暂时停止响应新请求前，短时间内的多少个请求可以被存在堆栈中back_log = 600# 设置事务的隔离级别，可以使用READ-UNCOMMITED 读未提交，READ-COMMITED 读已提交；REPEATABLE-READ 可重复读；SERIALIZABLE 串行transaction_isolcation = READ-COMMITED# 表名都小写lower_case_table_names =  1 # 避免MySQL外部锁定external-locking = FALSE  # LOGGING ## 错误日志文件log-error  = /data/mysql/mysql-error.log# 是否记录未使用索引的查询log-queries-not-using-indexes  = 1# 是否开启慢查询日志slow-query-log = 1# 慢查询日志文件位置slow-query-log-file= /data/mysql/mysql-slow.log&amp;tn=SE_hldp08010_vurs2xrp" class="bdselect_share_dialog_search" target="_blank"><i class="bdselect_share_dialog_search_i"></i><span class="bdselect_share_dialog_search_span">百度一下</span></a><a class="bdselect_share_dialog_close"></a></div><div class="bdselect_share_content"><ul class="bdselect_share_list bdshare-button-style0-32"><div class="bdselect_share_partners"><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_qzone" data-cmd="qzone"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_tsina" data-cmd="tsina"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_tqq" data-cmd="tqq"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_renren" data-cmd="renren"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_t163" data-cmd="t163"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_weixin" data-cmd="weixin"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_fbook" data-cmd="fbook"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_ty" data-cmd="ty"></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_s51" data-cmd="s51"></a></div><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" class="bds_more" data-cmd="more"></a></ul></div></div><div id="bdimgshare_1500807086865" class="sr-bdimgshare sr-bdimgshare-list sr-bdimgshare-16 sr-bdimgshare-black" style="height:36px;line-height:26px;font-size:12px;width:autopx;display:none;" data-bd-bind="1500807086865"><div class="bdimgshare-bg"></div><div class="bdimgshare-content bdsharebuttonbox bdshare-button-style0-16"><label class="bdimgshare-lbl">分享到：</label><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_qzone" data-cmd="qzone" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_tsina" data-cmd="tsina" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_tqq" data-cmd="tqq" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_renren" data-cmd="renren" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_t163" data-cmd="t163" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_weixin" data-cmd="weixin" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_fbook" data-cmd="fbook" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_ty" data-cmd="ty" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_s51" data-cmd="s51" hidefocus=""></a><a href="http://www.shixinke.com/mysql/mysql-server-configuration-parameters-optimization#" onclick="return false;" class="bds_more" data-cmd="more" hidefocus=""></a></div></div></body></html>