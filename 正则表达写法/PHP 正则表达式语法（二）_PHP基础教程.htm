<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0049)http://www.5idev.com/p-php_regular_syntax_2.shtml -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>PHP 正则表达式语法（二）_PHP基础教程</title><link rel="icon" href="http://www.5idev.com/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="http://www.5idev.com/favicon.ico" type="image/x-icon"><meta name="robots" content="all"><meta name="keywords" content="PHP 正则表达式,正则表达式语法,模式修正符"><meta name="description" content="PHP 正则表达式语法（二） 重复 分枝 贪婪与懒惰 模式修正符 正则表达式用一些重复规则来表达循环匹配。分枝是指制定几个规则，如果满足任意一种规则，则都当作匹配成功。正则表达式默认的情况下为贪婪匹配 ..."><meta name="copyright" content="Copyright (c) 2010 by 5idev.com"><meta name="Author" content="5idev.com"><link rel="stylesheet" type="text/css" href="./PHP 正则表达式语法（二）_PHP基础教程_files/default.css"><script type="text/javascript">
function addCookie(){　 // 加入收藏夹
	if (document.all){
		window.external.addFavorite('http://www.5idev.com', 'Web开发在线教程 - 我爱开发网');
	}else if (window.sidebar){
		window.sidebar.addPanel('Web开发在线教程 - 我爱开发网', 'http://www.5idev.com', "");
	}
}
</script></head><body><div id="container"><div id="header"><!--logo--><div id="logo"><a href="http://www.5idev.com/" title="Web开发在线教程" class="logo"><img src="./PHP 正则表达式语法（二）_PHP基础教程_files/logo.gif" alt="Web开发在线教程"></a></div><!--ad--><div class="ad-header"><script type="text/javascript">/*728*90，顶部*/ var cpro_id = 'u1063809';</script><script src="./PHP 正则表达式语法（二）_PHP基础教程_files/c.js" type="text/javascript"></script><script type="text/javascript" charset="utf-8" src="./PHP 正则表达式语法（二）_PHP基础教程_files/ecom"></script><div style="display:none">-</div> <iframe id="cproIframe1" src="./PHP 正则表达式语法（二）_PHP基础教程_files/uijs.htm" width="728" height="90" align="center,center" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" allowtransparency="true"></iframe></div></div><!--header end--><div id="top-nav"><div id="search"><form name="srcform" method="get" action="http://www.google.com.hk/search"><p><input type="hidden" name="sitesearch" value="5idev.com"></p><p><input type="hidden" name="tn" value="baiduadv"></p><p><input id="searched_content" name="as_q" type="text" title="在此输入搜索内容"><input id="submit" type="image" src="./PHP 正则表达式语法（二）_PHP基础教程_files/search_bottom.gif"></p></form></div><div id="nav-menu"><ul><li><a href="http://www.5idev.com/download">下载中心</a></li><li><a href="http://www.5idev.com/link">开发资源</a></li></ul></div></div><script type="text/javascript" src="./PHP 正则表达式语法（二）_PHP基础教程_files/jquery-1.4.2.min.js"></script><script type="text/javascript">
$(function(){
	$('#send').click(function(event){
		var nickname,linkurl,postcontent,aid
		nickname = $.trim($('#nickname').val());
		linkurl = $.trim($('#linkurl').val());
		postcontent = $.trim($('#postcontent').val());
		//aid = $('#aid').val();
		aid = 126;
		if(nickname==""){
			alert("您的称呼不能为空！");
			$('#nickname').focus();
			return false;
		}
		if(postcontent==""){
			alert("评论内容不能为空！");
			$('#postcontent').focus();
			return false;
		}
		$('#result').html('<img src="/Public/Images/loading.gif" />正在发送数据……');
		//alert(aid);
		$.ajax({
			type:'post',
			url:'/Article-addComment.shtml',
			data:'nickname='+nickname+'&linkurl='+linkurl+'&postcontent='+postcontent+'&aid='+aid,
			dataType:'json',
			success:function(msg){
			//alert("test");
				if(msg.status==1){
					$("#result").html(msg.info).fadeOut(4000);
					$("#form1")[0].reset();
					//$('#send').attr("disabled","true");
					//alert(msg.data.content);
					$('#comment').append('<div class="comment-list"><p class="title">刚才&nbsp;<span class="time">['+msg.data.createtime+']</span>&nbsp;<span class="bold">'+msg.data.nickname+'</span></p><p class="comment-content">'+msg.data.content+'</p></div>'); 
				} else {
				//alert("test");
					$("#result").html(msg.info);
				}
			}
			
		});
		//return false;
	})
})

</script><div id="content"><div id="sidebar"><div class="left-list"><div class="l-top-bg"></div><div class="hot-list"><p class="cat-title">PHP基础教程 列表
</p><ul><li><a href="http://www.5idev.com/p-php_install.shtml">PHP 开发环境安装</a></li><li><a href="http://www.5idev.com/p-php_syntax.shtml">PHP 基本语法</a></li><li><a href="http://www.5idev.com/p-php_types.shtml">PHP 数据类型</a></li><li><a href="http://www.5idev.com/p-php_operators.shtml">PHP 运算符</a></li><li><a href="http://www.5idev.com/p-php_expressions.shtml">PHP 表达式</a></li><li><a href="http://www.5idev.com/p-php_while.shtml">PHP 循环控制</a></li><li><a href="http://www.5idev.com/p-php_if_else.shtml">PHP 流程控制</a></li><li><a href="http://www.5idev.com/p-php_function.shtml">PHP 函数</a></li><li><a href="http://www.5idev.com/p-php_string.shtml">PHP 字符串处理</a></li><li><a href="http://www.5idev.com/p-php_array.shtml">PHP 数组</a></li><li><a href="http://www.5idev.com/p-php_time.shtml">PHP 时间日期</a></li><li><a href="http://www.5idev.com/p-php_form.shtml">PHP 表单</a></li><li><a href="http://www.5idev.com/p-php_file.shtml">PHP 文件处理</a></li><li><a href="http://www.5idev.com/p-php_file_upload.shtml">PHP 文件上传</a></li><li><a href="http://www.5idev.com/p-php_mkdir.shtml">PHP 目录</a></li><li><a href="http://www.5idev.com/p-php_cookie.shtml">PHP Cookie</a></li><li><a href="http://www.5idev.com/p-php_session.shtml">PHP Session</a></li><li><a href="http://www.5idev.com/p-php_gd.shtml">PHP 图像处理</a></li><li><a href="http://www.5idev.com/p-php_math.shtml">PHP 数学计算</a></li><li><a href="http://www.5idev.com/p-php_include.shtml">PHP 文件包含</a></li><li><a href="http://www.5idev.com/p-php_server.shtml">PHP $_SERVER 与 $_ENV</a></li><li><a href="http://www.5idev.com/p-php_regular_syntax_1.shtml">PHP 正则表达式</a></li><li><a href="http://www.5idev.com/p-php_class_object.shtml">PHP 类与对象</a></li></ul></div><div class="l-bottom-bg"></div></div><!--leftlist--><div class="left-menu"><img src="./PHP 正则表达式语法（二）_PHP基础教程_files/corner_top.gif" class="bg-top"><img src="./PHP 正则表达式语法（二）_PHP基础教程_files/corner_bottom.gif" class="bg-bottom"><p class="cat-title">相关参考课程</p><ul><li><a href="http://www.5idev.com/php-mysql.shtml">PHP+MySQL数据库教程</a></li><li><a href="http://www.5idev.com/php-practice.shtml">PHP实践教程</a></li><li><a href="http://www.5idev.com/thinkphp">ThinkPHP教程</a></li></ul></div><div><script type="text/javascript">/*250*250_侧边*/ var cpro_id = 'u818053';</script><script src="./PHP 正则表达式语法（二）_PHP基础教程_files/c(1).js" type="text/javascript"></script><script type="text/javascript" charset="utf-8" src="./PHP 正则表达式语法（二）_PHP基础教程_files/ecom(1)"></script><div style="display:none">-</div> <iframe id="cproIframe2" src="./PHP 正则表达式语法（二）_PHP基础教程_files/uijs(1).htm" width="250" height="250" align="center,center" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" allowtransparency="true"></iframe></div></div><!--leftsidebar--><div id="main-content"><div class="nav"><p><img src="./PHP 正则表达式语法（二）_PHP基础教程_files/home.gif"><a href="http://www.5idev.com/">5iDev</a>&nbsp;&nbsp;»&nbsp;&nbsp;<a href="http://www.5idev.com/php">PHP教程</a>&nbsp;&nbsp;»&nbsp;&nbsp;<a href="http://www.5idev.com/php-phpbase.shtml">PHP基础教程</a>&nbsp;&nbsp;»&nbsp;&nbsp;PHP 正则表达式语法（二）</p></div><div class="article"><h1>PHP 正则表达式语法（二）</h1><h2>重复</h2>
<p>
正则表达式的威力在于其能够在模式中包含选择和循环，正则表达式用一些重复规则来表达循环匹配。
</p>
<p>
常用的重复如下：
</p>
<table class="table">
<tbody><tr>
<th width="15%">重复</th>
<th>说明</th>
</tr>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复 1 次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或 1 次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复 n 次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复 n 次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复 n 到 m 次</td>
</tr>
</tbody></table>
<h2>分枝</h2>
<p>
分枝是指制定几个规则，如果满足任意一种规则，则都当作匹配成功。具体来说就是用 | 符号把各种规则分开，且条件从左至右匹配。
</p>
<h3>提示</h3>
<p>
由于分枝规定，只要匹配成功，就不再对后面的条件加以匹配，所以如果你想匹配有包含关系的内容，请注意规则的顺序。
</p>
<p>
下面是一个使用分枝的例子。
</p>
<p>
美国的邮政编码的规则是 5 个数字或者 5 个数字连上 4 个数字，如 12345 或者 54321-1234 ，如果要匹配所有的邮编，则正确的正则表达式为：
</p>
<pre>\d{5}-\d{4}|\d{5}
//错误写法
\d{5}|\d{5}-\d{4}
</pre>
<p>
下面的错误写法，只能匹配到 5 位数字及 9 位数字的前 5 位数字的情况，而不能匹配 9 位数字的邮编。
</p>
<h2>分组</h2>
<p>
在正则表达式中，可以用小括号将一些规则括起来当作分组，分组可以作为一个元字符来看待。
</p>
<p>
分组的例子，验证 IP 地址：
</p>
<pre>(\d{1,3}\.){3}\d{1,3}
</pre>
<p>
这是一个简单的且不完善的匹配 IP 地址的正则表达式，因为它除了能匹配正确的 IP 地址外，还能匹配如 322.197.578.888 这种不存在的 IP 地址。
</p>
<p>
当然，用这个表达式简单匹配成功后可以在利用 PHP 的算术比较再加以判断 IP 地址是否正确。而正则表达式中没有提供算术比较功能，如果要完全匹配正确的 IP 地址，则需要改进如下：
</p>
<pre>((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?)
</pre>
<h3>规则说明</h3>
<p>
该规则关键之处在于确定 IP 地址每一段范围为 0-255 ，然后再重复 4 次即可。在：
</p>
<pre>25[0-5]|2[0-4]\d|[01]?\d\d?
</pre>
<p>
中，用分枝首先确定了 250-255 和 200-249 。 [01]?\d\d? 则确定了 0-199 的范围，综合起来就是 0-255 。
</p>
<h2>贪婪与懒惰</h2>
<p>
正则表达式默认的情况下，会在满足匹配条件下尽可能的匹配更多内容。如 a.*b，用他来匹配 aabab ，它会匹配整个 aabab ，而不会只匹配到 aab 为止，这就是贪婪匹配。
</p>
<p>
与贪婪匹配对应的是，在满足匹配条件的情况下尽可能的匹配更少的内容，这就是懒惰匹配。
</p>
<p>
上述例子对应的懒惰匹配规则为：
</p>
<pre>a.*?b
</pre>
<p>
如果用该表达式去匹配 aabab ，那么就会得到 aab 和 ab 这样两个匹配结果。
</p>
<p>
常用的懒惰限定符如下：
</p>
<table class="table">
<tbody><tr>
<th width="15%">懒惰限定符</th>
<th>说明</th>
</tr>
<tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复 1 次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复 0 次或 1 次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复 n 次以上，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复 n 到 m 次，但尽可能少重复</td>
</tr>
</tbody></table>
<h2>模式修正符</h2>
<p>
模式修正符是标记在整个正则表达式之外的，可以看着是对正则表达式的一些补充说明。
</p>
<p>
常用的模式修正符如下：
</p>
<table class="table">
<tbody><tr>
<th width="15%">模式修正符</th>
<th>说明</th>
</tr>
<tr>
<td>i</td>
<td>模式中的字符将同时匹配大小写字母</td>
</tr>
<tr>
<td>m</td>
<td>字符串视为多行</td>
</tr>
<tr>
<td>s</td>
<td>将字符串视为单行，换行符作为普通字符</td>
</tr>
<tr>
<td>x</td>
<td>将模式中的空白忽略</td>
</tr>
<tr>
<td>e</td>
<td>preg_replace() 函数在替换字符串中对逆向引用作正常的替换，将其作为 PHP 代码求值，并用其结果来替换所搜索的字符串。 </td>
</tr>
<tr>
<td>A</td>
<td>强制仅从目标字符串的开头开始匹配</td>
</tr>
<tr>
<td>D</td>
<td>模式中的 $ 元字符仅匹配目标字符串的结尾</td>
</tr>
<tr>
<td>U</td>
<td>匹配最近的字符串</td>
</tr>
<tr>
<td>u</td>
<td>模式字符串被当成 UTF-8</td>
</tr>
</tbody></table></div><div class="article-list"><p class="bold">本章节内容共分 6 部分：</p><ol><li>1. 
<a href="file:///C:/Inetpub/wwwroot/monpub/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%86%99%E6%B3%95/PHP%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89_PHP%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B.htm">PHP 正则表达式语法（一）</a></li><li>2. 
PHP 正则表达式语法（二）</li><li>3. 
<a href="http://www.5idev.com/p-php_preg_match.shtml">PHP 正则表达式匹配 preg_match 与 preg_match_all 函数</a></li><li>4. 
<a href="http://www.5idev.com/p-php_preg_replace.shtml">PHP 正则表达式替换 preg_replace 函数</a></li><li>5. 
<a href="http://www.5idev.com/p-php_preg_split.shtml">PHP 正则表达式分割 preg_split 与 split 函数</a></li><li>6. 
<a href="http://www.5idev.com/p-php_regular_expressions.shtml">PHP 常用正则表达式整理</a></li></ol></div><div class="pn"><ul><li><a href="http://www.5idev.com/p-php_server.shtml" title="上一节 : PHP 服务器变量 $_SERVER" class="pre">上一节</a></li><li><a href="http://www.5idev.com/p-php_class_object.shtml" title="下一节 : PHP 类与对象" class="next">下一节</a></li></ul></div><div class="ad-360buy-bottom"><script type="text/javascript">/*640*60_首页底部*/ var cpro_id = 'u817898';</script><script src="./PHP 正则表达式语法（二）_PHP基础教程_files/c(1).js" type="text/javascript"></script><script type="text/javascript" charset="utf-8" src="./PHP 正则表达式语法（二）_PHP基础教程_files/ecom(2)"></script><div style="display:none">-</div> <iframe id="cproIframe3" src="about:blank" width="640" height="60" align="center,center" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" allowtransparency="true"></iframe></div><div id="comment"><!--评论列表--><h3 class="comment-title">查看评论</h3><div class="comment-list"><p class="title">
#1楼&nbsp;<span class="time">[2012-11-19 23:22]</span>&nbsp;
<span class="bold">我爱PHP</span></p><p class="comment-content">/没有转义</p></div></div><!--评论列表结束--><div class="post-comment"><h3 class="comment-title">发表评论<span id="result" style="margin-left:30px;"></span></h3><form id="form1" name="commentForm"><p><label for="name">您的称呼:</label><input id="nickname" name="nickname" type="text" class="input"><span>(必填)</span></p><p><label for="url">链接地址:</label><input id="linkurl" name="linkurl" type="text" class="input"><span>(非必填，点击您的名字可链接至该地址，不用加http://)</span></p><p><label for="postcontent">评论内容:</label><textarea id="postcontent" name="postcontent"></textarea></p><button type="button" id="send" class="submit"> 发表评论 </button><span>
(请自觉遵守互联网相关政策法规，严禁发布色情、暴力、反动言论)
</span></form></div></div><!--main-content--></div><!--content--><!--footer start--><div id="footer"><ul><li><a href="http://www.5idev.com/Aboutus" rel="nofollow">关于我们</a></li><li><a href="javascript:addCookie();" rel="nofollow">收藏本站</a></li><li><a href="http://www.5idev.com/Aboutus-copyright.shtml" rel="nofollow">版权声明</a></li><li><a href="http://www.5idev.com/Aboutus-sitemap.shtml">网站地图</a></li><li><a href="http://www.5idev.com/Aboutus-guestbook.shtml" rel="nofollow">请您留言</a></li><li class="last"><a href="http://www.5idev.com/Aboutus-helping.shtml" rel="nofollow">帮助5iDev</a></li></ul><div id="copyright"><p>Copyrights © 2010 <a href="http://www.5idev.com/">我爱开发网</a> all rights reserved</p><p><script src="./PHP 正则表达式语法（二）_PHP基础教程_files/stat.php" language="JavaScript"></script><script src="./PHP 正则表达式语法（二）_PHP基础教程_files/cnzz_core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=2501508" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./PHP 正则表达式语法（二）_PHP基础教程_files/pic.gif"></a><script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F77884d98f571c6f48f828f58a8b284d9' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./PHP 正则表达式语法（二）_PHP基础教程_files/h.js" type="text/javascript"></script><a href="http://tongji.baidu.com/hm-web/welcome/ico?s=77884d98f571c6f48f828f58a8b284d9" target="_blank"><img border="0" src="./PHP 正则表达式语法（二）_PHP基础教程_files/21.gif" width="20" height="20"></a></p></div></div><!--footer end--></div><!--container--><div id="note"><p>5idev.com(我爱开发网) — 提供最好的 <a href="http://www.5idev.com/html">XHTML教程</a>、<a href="http://www.5idev.com/css">DIV+CSS教程</a>、<a href="http://www.5idev.com/js">JavaScript教程</a>、<a href="http://www.5idev.com/php">PHP教程</a> 及 <a href="http://www.5idev.com/thinkphp">ThinkPHP教程</a></p></div><iframe style="position: absolute; width: 100px; height: 1px; z-index: -10240; visibility: hidden; top: 0px; left: 0px;" src="./PHP 正则表达式语法（二）_PHP基础教程_files/e.htm"></iframe></body></html>